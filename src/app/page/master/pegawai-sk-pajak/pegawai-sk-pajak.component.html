<div class="ui-fluid">
	<div class="ui-g">
		<div class="ui-g-12">
			<div class="card card-w-title">
				<p-confirmDialog header="Confirmation" icon="fa fa-question-circle" width="425"></p-confirmDialog>
				<h1>{{'frmPegawaiSkPajak_title'| translate | splitCharT}}</h1>
				<div class="ui-g form-group">
					<form [formGroup]="form" (ngSubmit)="onSubmit()">
						<div class="ui-g-12">
							<p-fieldset legend="">
								<div class="ui-g form-group">
									<div class="ui-g-12 ui-md-4" style="margin-top: 8px;">
										<div class="ui-g-12 ui-md-9">
											<label>{{'frmPegawaiSkPajak_namaSK'| translate | splitCharT}}
												<span style="color: red;font-weight: bolder;">*</span>
												<span *ngIf="!form.get('namaSk').valid && form.get('namaSk').touched" style="color: red;font-weight: bolder;"> {{'frmPegawaiSkPajak_required'| translate | splitCharT}}</span>
											</label>
											<p-dropdown formControlName="namaSk" (onChange)="ambilSK($event)" class="ui-inputwrapper-filled" [options]="namaSK" [autoWidth]="false"></p-dropdown>
										</div>
										<div class="ui-g-12 ui-md-3">
											<br>
											<button pButton type="button" label="{{'frmPegawaiSkPajak_btnBuatSk'| translate | splitCharT }}" (click)="getKelompokTransaksi()"></button>
										</div>

										<div class="ui-g-12 ui-md-12" hidden>
											<label>{{'frmPegawaiSkPajak_noSK'| translate | splitCharT}}</label>
											<input id="input" type="text" pInputText formControlName="noSk" disabled />
										</div>
										<div class="ui-g-12 ui-md-12" >
											<label>{{'frmPegawaiSkPajak_noSKIntern'| translate | splitCharT}}</label>
											<input id="input" type="text" pInputText formControlName="noSKIntern" disabled />
										</div>


									</div>

									<!-- <div class="ui-g-12 ui-md-3" style="margin-top: 9px; margin-left: 40px;">
										<div class="ui-g-12 ui-md-7" hidden>
											<label>{{'noSK'| translate | splitCharT}}</label>
											<input id="input" type="text" pInputText formControlName="noSk" disabled />
										</div>
										<div class="ui-g-12 ui-md-7" >
											<label>{{'frmPegawaiSkPajak_noSKIntern'| translate | splitCharT}}</label>
											<input id="input" type="text" pInputText formControlName="noSKIntern" disabled />
										</div>
									</div> -->


									<div class="ui-g-12 ui-md-6" style="margin-top: 9px; margin-left: 40px;">
									<!-- <div class="ui-g-12 ui-md-4" style="margin-top: 4px; margin-left: -80px;"> -->
										<div class="ui-g form-group">
											<div class="ui-g-12 ui-md-10">
												<label>{{'frmPegawaiSkPajak_periodeBerlakuSk'| translate | splitCharT}}</label>
											</div>
											<div class="ui-g-12 ui-md-4">
												<app-calender dateFormat="dd M yy"  formControlName="tanggalAwal" [monthNavigator]="true" [yearNavigator]="true"
												 yearRange="2000:2030" [showIcon]="true"></app-calender>
											</div>
											<div>
												<div class="ui-g-12 ui-md-1" style="text-align:  center;">
													<label>-</label>
												</div>
											</div>
											<div class="ui-g-12 ui-md-4">
												<app-calender dateFormat="dd M yy" formControlName="tanggalAkhir" [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030"
												 [showIcon]="true"></app-calender>
											</div>
										</div>
									</div>
									<p-checkbox hidden binary="true" label="" formControlName="aktifTanggal" (onChange)="changeAktif($event)" disabled></p-checkbox>
								</div>
							</p-fieldset>
						</div>

						<div class="ui-g-12">
							<p-fieldset legend="">
								<div class="ui-g form-group">
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label>
												{{'frmPegawaiSkPajak_range'| translate | splitCharT }}
												<span style="color: red;font-weight: bolder;">*</span>
												<span *ngIf="!form.get('kdRange').valid && form.get('kdRange').touched" style="color: red;font-weight: bolder;"> {{'frmPegawaiSkPajak_required'| translate | splitCharT }}</span>
											</label>
											<p-multiSelect [options]="listRange" formControlName="kdRange" [(ngModel)]="selectedRange" multiple="multiple" checkbox="checkbox"
											 filter="filter" optionLabel="label">
											</p-multiSelect>
										</div>
									</div>
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label>{{'frmPegawaiSkPajak_objekPajak'| translate | splitCharT}}
												<span style="color: red;font-weight: bolder;">*</span>
												<span *ngIf="!form.get('kdObjekPajak').valid && form.get('kdObjekPajak').touched" style="color: red;font-weight: bolder;">
													{{'frmPegawaiSkPajak_required'| translate | splitCharT }}</span>
											</label>
											<p-dropdown id="objekPajak" formControlName="kdObjekPajak" [options]="listObjekPajak" [autoWidth]="false" [filter]="true"
											 filterBy="label" class="ui-inputwrapper-filled"></p-dropdown>
										</div>
									</div>
								</div>
							</p-fieldset>
						</div>

						<div class="ui-g-12">
							<p-fieldset legend="">
								<div class="ui-g form-group">
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label>
												{{'frmPegawaiSkPajak_levelJabatan'| translate | splitCharT }}
												<span style="color: red;font-weight: bolder;">*</span>
												<span *ngIf="!form.get('kdGolonganPegawai').valid && form.get('kdGolonganPegawai').touched" style="color: red;font-weight: bolder;">
													{{'frmPegawaiSkPajak_required'| translate | splitCharT }}</span>
											</label>
											<p-multiSelect [options]="listGolonganPegawai" formControlName="kdGolonganPegawai" [(ngModel)]="selectedGolongan" multiple="multiple"
											 checkbox="checkbox" filter="filter" optionLabel="label">
											</p-multiSelect>
										</div>
									</div>
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label>
												{{'frmPegawaiSkPajak_kategoryPegawai'| translate | splitCharT }}
												<span style="color: red;font-weight: bolder;">*</span>
												<span *ngIf="!form.get('kdKategoryPegawai').valid && form.get('kdKategoryPegawai').touched" style="color: red;font-weight: bolder;">
													{{'frmPegawaiSkPajak_required'| translate | splitCharT }}</span>
											</label>
											<!-- <p-multiSelect [options]="listKategoryPegawai" formControlName="kdKategoryPegawai" [(ngModel)]="selectedKategori" multiple="multiple"
											 checkbox="checkbox" filter="filter" optionLabel="label">
											</p-multiSelect> -->
											<p-dropdown formControlName="kdKategoryPegawai" [options]="listKategoryPegawai" [(ngModel)]="kdKategoriPegawai" (ngModelChange)="valuechangeGetKomponen($event)"
											 [autoWidth]="false" [filter]="true" filterBy="label" class="ui-inputwrapper-filled"></p-dropdown>
										</div>
									</div>
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label>{{'frmPegawaiSkPajak_komponen'| translate | splitCharT}}
												<span style="color: red;font-weight: bolder;">*</span>
												<span *ngIf="!form.get('kdKomponen').valid && form.get('kdKomponen').touched" style="color: red;font-weight: bolder;"> {{'frmPegawaiSkPajak_required'| translate | splitCharT }}</span>
											</label>
											<p-dropdown formControlName="kdKomponen" [options]="listKomponen" [autoWidth]="false" [filter]="true" filterBy="label" class="ui-inputwrapper-filled"></p-dropdown>
											<!-- <p-multiSelect [options]="listKomponen" formControlName="kdKomponen" [(ngModel)]="selectedKomponen" multiple="multiple" checkbox="checkbox"
										 filter="filter" optionLabel="label">
										</p-multiSelect> -->
										</div>
									</div>
								</div>
							</p-fieldset>
						</div>
						<div class="ui-g-12">
							<p-fieldset legend="">
								<div class="ui-g form-group">
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_hargaSatuan'| translate | splitCharT }}</label>
											<p-spinner id="input" [min]="0" type="text" formControlName="hargaSatuan"></p-spinner>
										</div>
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_%HargaSatuan'| translate | splitCharT }}
												<span style="color: red;font-weight: bolder;">*</span>
												<span *ngIf="!form.get('hargaSatuanPersen').valid && form.get('hargaSatuanPersen').touched" style="color: red;font-weight: bolder;">
													{{'frmPegawaiSkPajak_required'| translate | splitCharT }}</span>
											</label>
											<input id="input" type="text" formControlName="hargaSatuanPersen" pInputText/>
										</div>
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_hargaSatuanPinalty'| translate | splitCharT }}</label>
											<p-spinner id="input" [min]="0" type="text" formControlName="hargaSatuanPinalty"></p-spinner>
										</div>
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_%HargaSatuanPinalty'| translate | splitCharT }}</label>
											<input id="input" type="text" formControlName="persenHargaSatuanPinalty" pInputText/>
										</div>
									</div>
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_rumusPerhitungan'| translate | splitCharT }}</label>
											<textarea [rows]="1" [cols]="30" formControlName="rumusPerhitungan" pInputTextarea autoResize="autoResize" class="ui-inputwrapper-filled"></textarea>
										</div>
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_factorRate'| translate | splitCharT }}</label>
											<input id="input" type="text" formControlName="factorRate" pInputText/>
										</div>
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_operatorFactorRate'| translate | splitCharT }}</label>
											<p-dropdown id="operatorFactorRate" formControlName="kdOperatorFactorRate" [options]="listOperatorFactorRate" [autoWidth]="false"
											 [filter]="true" filterBy="label" class="ui-inputwrapper-filled"></p-dropdown>
										</div>
									</div>
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_komponenEffect'| translate | splitCharT }}</label>
											<p-dropdown id="listKomponenEffect" formControlName="kdKomponenEffect" [options]="listKomponenEffect" [autoWidth]="false"
											 [filter]="true" filterBy="label" class="ui-inputwrapper-filled"></p-dropdown>
										</div>
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_metodeHitung'| translate | splitCharT }}</label>
											<p-dropdown id="listMetodeHitung" formControlName="kdMetodeHitung" [options]="listMetodeHitung" [autoWidth]="false" [filter]="true"
											 filterBy="label" class="ui-inputwrapper-filled"></p-dropdown>
										</div>
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_metodePembayaran'| translate | splitCharT }}</label>
											<p-dropdown id="listMetodePembayaran" formControlName="kdMetodePembayaran" [options]="listMetodePembayaran" [autoWidth]="false"
											 [filter]="true" filterBy="label" class="ui-inputwrapper-filled"></p-dropdown>
										</div>
									</div>
									<div class="ui-g-12 ui-md-3">
										<div class="ui-g-12 ui-md-12">
											<label for="input">{{'frmPegawaiSkPajak_keteranganLainnya'| translate | splitCharT }}</label>
											<textarea [rows]="1" [cols]="30" formControlName="keteranganLainnya" pInputTextarea autoResize="autoResize" class="ui-inputwrapper-filled"></textarea>
										</div>
										<div class="ui-g-12 ui-md-6">
											<label for="input">{{'frmPegawaiSkPajak_isProRate' | translate | splitCharT }}</label>
										</div>
										<div class="ui-g-12 ui-md-6">
											<p-checkbox binary="true" label="{{'frmPegawaiSkPajak_ya'| translate | splitCharT}}" formControlName="proRate" (onChange)="changeProRate($event)"></p-checkbox>
										</div>
										<!-- <div class="ui-g-12 ui-md-6">
											<label for="input">{{'statusEnabled' | translate | splitCharT }}</label>
										</div> -->
										<div class="ui-g-12">
											<p-checkbox binary="true" label="{{'frmPegawaiSkPajak_statusEnabled'| translate | splitCharT}}" formControlName="statusEnabled" (onChange)="changeProRate($event)"></p-checkbox>
											<span *ngIf="!form.get('statusEnabled').valid && form.get('statusEnabled').touched" style="color: red;font-weight: bolder;">* {{'frmPegawaiSkPajak_required'| translate | splitCharT }}</span>
										</div>
									</div>
								</div>
							</p-fieldset>
						</div>
					</form>

					<div class="ui-g-12">
						<div class="ui-g-12 ui-md-7"></div>
						<div class="ui-g-12 ui-md-1">
							<button pButton type="button" label="{{'frmPegawaiSkPajak_btnBatal'| translate | splitCharT }}" icon="fa-refresh" (click)="reset()"></button>
						</div>
						<div class="ui-g-12 ui-md-1">
							<button pButton type="submit" label="{{'frmPegawaiSkPajak_btnSimpan'| translate | splitCharT }}" icon="fa-save" (click)="onSubmit()"></button>
						</div>
						<div class="ui-g-12 ui-md-1">
							<button pButton type="button" label="{{'frmPegawaiSkPajak_btnHapus'| translate | splitCharT }}" icon="fa-trash" (click)="confirmDelete()"></button>
						</div>
						<div class="ui-g-12 ui-md-1">
							<button pButton type="button" label="{{'frmPegawaiSkPajak_btnCetak'| translate | splitCharT }}" icon="fa-print" (click)="cetak()"></button>
						</div>
						<div class="ui-g-12 ui-md-1">
							<p-splitButton label="{{'frmPegawaiSkPajak_btnExport'| translate | splitCharT }}" icon="fa-external-link" [model]="items"></p-splitButton>
						</div>
					</div>

					<div class="ui-g-12">
						<p-dataTable [value]="listData" [rows]="10" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]" selectionMode="single"
						 [(selection)]="selected" (onRowSelect)="onRowSelect($event)" [loading]="loading" loadingIcon="fa-spinner" [totalRecords]="totalRecords"
						 (onLazyLoad)="loadPage($event)" [lazy]="true" scrollable="true">

							<p-header>
								<div class="ui-helper-clearfix">
									<i class="fa fa-search" style="padding:0.5em 0.5em;float:right"></i>
									<input type="text" pInputText size="50" placeholder="{{'frmPegawaiSkPajak_pencarianObjekPajak'| translate | splitCharT}}" [(ngModel)]="pencarian" (keyup)="cari()"
									 style="width: 20%;float:right;">
									<span style="float: left;padding:0.3em;">{{'frmPegawaiSkPajak_tableDaftarPegawaiSKPajak'| translate | splitCharT }}</span>
								</div>
							</p-header>
							<!-- <p-column field="kode.noSK" header="{{'frmPegawaiSkPajak_tableNoSK'| translate | splitCharT }}" [style]="{'width':'100px'}"></p-column> -->
							<p-column field="noSKIntern" header="{{'frmPegawaiSkPajak_tableNoSKIntern'| translate | splitCharT }}" [style]="{'width':'100px'}"></p-column>
							<p-column field="namaSK" header="{{'frmPegawaiSkPajak_tableNamaSk'| translate | splitCharT }}" [style]="{'width':'250px'}"></p-column>
							<p-column field="tglBerlakuAwal" header="{{'frmPegawaiSkPajak_tableTanggalAwalBerlakuSK'| translate | splitCharT }}" [style]="{'width':'150px'}">
								<ng-template pTemplate="body" let-StatusSK="rowData">
									<span *ngIf="StatusSK.tglBerlakuAwal != null">{{StatusSK.tglBerlakuAwal * 1000 | date:'dd MMM yyyy'}}</span>
									<span *ngIf="StatusSK.tglBerlakuAwal == null">-</span>
								</ng-template>
							</p-column>
							<p-column field="tglBerlakuAkhir" header="{{'frmPegawaiSkPajak_tableTanggalAkhirBerlakuSK'| translate | splitCharT }}" [style]="{'width':'150px'}">
								<ng-template pTemplate="body" let-StatusSK="rowData">
									<span *ngIf="StatusSK.tglBerlakuAkhir != null">{{StatusSK.tglBerlakuAkhir * 1000 | date:'dd MMM yyyy'}}</span>
									<span *ngIf="StatusSK.tglBerlakuAkhir == null">-</span>
								</ng-template>
							</p-column>
							<p-column field="namaObjekPajak" header="{{'frmPegawaiSkPajak_tableObjekPajak'| translate | splitCharT }}" [style]="{'width':'200px'}"></p-column>
							<p-column field="namaGolonganPegawai" header="{{'frmPegawaiSkPajak_tableLevelJabatan'| translate | splitCharT }}" [style]="{'width':'200px'}"></p-column>
							<p-column field="namaRange" header="{{'frmPegawaiSkPajak_tableRange'| translate | splitCharT }}" [style]="{'width':'250px'}"></p-column>
							<p-column field="persenHargaSatuan" header="{{'frmPegawaiSkPajak_table%HargaSatuan'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="hargaSatuan" header="{{'frmPegawaiSkPajak_tableHargaSatuan'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="persenHargaSatuanPinalty" header="{{'frmPegawaiSkPajak_table%HargaSatuanPinalty'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="hargaSatuanPinalty" header="{{'frmPegawaiSkPajak_tableHargaSatuanPinalty'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="factorRate" header="{{'frmPegawaiSkPajak_tableFactorRate'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="operatorFactorRate" header="{{'frmPegawaiSkPajak_tableOperatorFactorRate'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="namaKomponenEffect" header="{{'frmPegawaiSkPajak_tableKomponenEffect'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="namaMetodeHitung" header="{{'frmPegawaiSkPajak_tableMetodeHitung'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="namaMetodePembayaran" header="{{'frmPegawaiSkPajak_tableMetodePembayaran'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="keteranganLainnya" header="{{'frmPegawaiSkPajak_tableKeteranganLainnya'| translate | splitCharT }}" [style]="{'width':'150px'}"></p-column>
							<p-column field="isProRate" header="{{'frmPegawaiSkPajak_tableProRate'| translate | splitCharT }}" [style]="{'width':'150px'}">
								<ng-template pTemplate="body" let-prodat="rowData">
									<span *ngIf="prodat.isProRate == 1">Ya</span>
									<span *ngIf="prodat.isProRate == 0">-</span>
								</ng-template>
							</p-column>
							<p-column field="statusEnabled" header="{{'frmPegawaiSkPajak_tableStatusEnabled'| translate | splitCharT }}" [style]="{'width':'150px'}">
								<ng-template let-col="rowData" pTemplate type="body">
									{{col.statusEnabled | truefalse | translate | splitCharT }}
								</ng-template> 
							</p-column>

						</p-dataTable>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>