<div class="ui-fluid">
	<div class="ui-g">
		<div class="ui-g-12">
			<div class="card card-w-title">
				<p-confirmDialog header="Confirmation" icon="fa fa-question-circle" width="425"></p-confirmDialog>
				<h1>Master {{'frmMasterRekanan_title'| translate | splitCharT}}</h1>
				<div class="ui-g form-group">
					<div class="ui-g-12">
						<form [formGroup]="form">
							<div class="ui-g form-group">
								<div class="ui-g-9">
									<!-- <div class="ui-g-12 ui-md-10" hidden>
										<span class="ui-float-label" hidden>
											<input id="input" type="text" hidden formControlName="kode" pInputText
												disabled />
											<label for="input" hidden>{{'frmMasterRekanan_kode'| translate | splitCharT}}</label>
										</span>
									</div> -->
									<div class="ui-g-12 ui-md-2">
											<label>{{'frmMasterRekanan_periodeAwal'|translate | splitCharT}}</label>
											<app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030" formControlName="tglAwal"
											 [showIcon]="true" dateFormat="dd M yy" [showTime]="true"></app-calender>
									</div>
									<!-- <div>
										<br />
										<label>-</label>
									</div> -->
									<div class="ui-g-12 ui-md-2">
											<label>{{'frmMasterRekanan_periodeAkhir'|translate | splitCharT}}</label>
											<app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="2000:2030" formControlName="tglAkhir"
											 [showIcon]="true" dateFormat="dd M yy" [showTime]="true"></app-calender>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_jenisRekanan'| translate | splitCharT}}
											<span style="color: red;font-weight: bolder;">*</span>
											<span
												*ngIf="!form.get('kdJenisKontak').valid && form.get('kdJenisKontak').touched"
												style="color: red"> {{'required'| translate | splitCharT}}</span>
										</label>
										<p-dropdown id="dropdown" #da formControlName="kdJenisKontak" filter="filter"
											class="ui-inputwrapper-filled" [options]="listJenisRekanan"
											[autoWidth]="false" resetFilterOnHide="true">
										</p-dropdown>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_namaRekanan'| translate | splitCharT}}
											<span style="color: red;font-weight: bolder;">*</span>
											<span
												*ngIf="!form.get('namaLengkap').valid && form.get('namaLengkap').touched"
												style="color: red"> {{'required'| translate | splitCharT}}</span>
										</label>
										<input id="namaTitle" maxlength="200" formControlName="namaLengkap" type="text"
											pInputText />
									</div>
									<!-- <div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_gmbrLogo'| translate | splitCharT}}</label>
										<div style="display: flex; padding: 0px; margin: 0px">
											<p-fileUpload mode="basic" (onUpload)="fileUpload($event)" accept="image/*"
												name="file" maxFileSize="1000000" (onBeforeSend)="addHeader($event)"
												auto="true" [url]="urlUpload()" withCredentials="true"
												chooseLabel="Browse" [showCancelButton]="false">
											</p-fileUpload>
											<input id="filePath" [(ngModel)]="namaFile"
												[ngModelOptions]="{standalone: true}" style="height: 3.8vh" type="text"
												disabled pInputText />
										</div>
									</div> -->
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_negara'| translate | splitCharT}}
											<span style="color: red;font-weight: bolder;">*</span>
											<span *ngIf="!form.get('kdNegara').valid && form.get('kdNegara').touched"
												style="color: red"> {{'required'| translate | splitCharT}}</span>
										</label>
										<p-dropdown id="dropdown" #db formControlName="kdNegara" filter="filter"
											class="ui-inputwrapper-filled" (onChange)="negaraChange(dc)"
											[options]="listNegara" [autoWidth]="false" resetFilterOnHide="true">
										</p-dropdown>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_prov'| translate | splitCharT}}
											<span style="color: red;font-weight: bolder;">*</span>
											<span
												*ngIf="!form.get('kdPropinsi').valid && form.get('kdPropinsi').touched"
												style="color: red"> {{'required'| translate | splitCharT}}</span>
										</label>
										<p-dropdown id="dropdown-propinsi" #dc formControlName="kdPropinsi" filter="filter"
											class="ui-inputwrapper-filled" (onChange)="provChange(dd)"
											[options]="listPropinsi" [autoWidth]="false" resetFilterOnHide="true">
										</p-dropdown>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_kota'| translate | splitCharT}}</label>
										<p-dropdown id="dropdown" #dd formControlName="kdKotaKabupaten" filter="filter"
											class="ui-inputwrapper-filled" (onChange)="kotaChange(de)"
											[options]="listKotaKab" [autoWidth]="false" resetFilterOnHide="true">
										</p-dropdown>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_kecamatan'| translate | splitCharT}}</label>
										<p-dropdown id="dropdown" #de formControlName="kdKecamatan" filter="filter"
											class="ui-inputwrapper-filled" (onChange)="kecChange(df)"
											[options]="listKecamatan" [autoWidth]="false" resetFilterOnHide="true">
										</p-dropdown>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_desa'| translate | splitCharT}}</label>
										<p-dropdown id="dropdown" #df formControlName="kdDesaKelurahan" filter="filter"
											class="ui-inputwrapper-filled" (onChange)="kelChange()" [options]="listDesa" [autoWidth]="false" resetFilterOnHide="true">
										</p-dropdown>
									</div>
									<div class="ui-g-12 ui-md-4">
										<div style="padding-top: 0px; padding-left: 0px" class="ui-g-12 ui-md-6">
											<label for="input">{{'frmMasterRekanan_kdPos'| translate | splitCharT}}</label>
											<input id="namaTitle" maxlength="10" (input)="kodePos()"
												formControlName="kodePos" type="text" readonly pInputText />
										</div>
										<div style="padding-top: 0px; padding-right: 0px" class="ui-g-12 ui-md-6">
											<label for="input">{{'frmMasterRekanan_rtRw'| translate | splitCharT}}</label>
<!-- 											<input id="namaTitle" maxlength="7" formControlName="rtrw" type="text" mask
												pInputText /> -->
											<p-inputMask id="namaTitle" formControlName="rtrw" mask="999/999"></p-inputMask>
										</div>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_almtLengkap'| translate | splitCharT}}
											<span style="color: red;font-weight: bolder;">*</span>
											<span
												*ngIf="!form.get('alamatLengkap').valid && form.get('alamatLengkap').touched"
												style="color: red"> {{'required'| translate | splitCharT}}</span>
										</label>
										<textarea style="height: 11.3vh;" pInputTextarea maxlength="200"
											id="isiManualHelp" formControlName="alamatLengkap" rows="4" cols="10"
											type="text"></textarea>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_almtEmail'| translate | splitCharT}}</label>
										<input id="namaTitle" maxlength="50" formControlName="alamatEmail" type="text"
											pInputText />
									</div>
									<div class="ui-g-12 ui-md-4">
										<div style="padding-top: 0px; padding-left: 0px" class="ui-g-12 ui-md-6">
											<label for="input">{{'frmMasterRekanan_fixedPhone1'| translate | splitCharT}}</label>
											<input id="namaTitle" maxlength="15" formControlName="fixedPhone1"
												type="text" pInputText />
										</div>
										<div style="padding-top: 0px; padding-right: 0px" class="ui-g-12 ui-md-6">
											<label for="input">{{'frmMasterRekanan_handphone'| translate | splitCharT}}</label>
											<input id="namaTitle" maxlength="15" formControlName="mobilePhone1"
												type="text" pInputText />
										</div>
									</div>
									<div class="ui-g-12 ui-md-4">
										<label for="input">{{'frmMasterRekanan_faksimile'| translate | splitCharT}}</label>
										<input id="namaTitle" maxlength="15" formControlName="faksimile1" type="text"
											pInputText />
									</div>
									<div class="ui-g-12 ui-md-3">
										<label for="input">{{'frmMasterRekanan_web'| translate | splitCharT}}</label>
										<input id="namaTitle" maxlength="80" formControlName="website" type="text"
											pInputText />
									</div>
									<div class="ui-g-12 ui-md-1">
										<label>{{'statusEnabled' | translate | splitCharT }}</label>
										<br>
										<p-checkbox binary="true" formControlName="statusEnabled"></p-checkbox>
											<!-- <span *ngIf="!form.get('statusEnabled').valid && form.get('statusEnabled').touched" style="color: red">*</span>
											<span *ngIf="!form.get('statusEnabled').valid && form.get('statusEnabled').touched" style="color: red">{{'required'| translate | splitCharT}}</span> -->
									</div>
								</div>
								<div class="ui-g-9 ui-md-3">
									<div>
										<label for="input">{{'frmMasterRekanan_gmbrLogo'| translate | splitCharT}}</label>
										<div style="display: flex; padding: 0px; margin: 0px">
											<p-fileUpload mode="basic" (onUpload)="fileUpload($event)" accept="image/*"
												name="file" maxFileSize="1000000" (onBeforeSend)="addHeader($event)"
												auto="true" [url]="urlUpload()" withCredentials="true"
												chooseLabel="Browse" [showCancelButton]="false">
											</p-fileUpload>
											<input id="filePath" [(ngModel)]="namaFile"
												[ngModelOptions]="{standalone: true}" style="height: 3.8vh" type="text"
												disabled pInputText />
										</div>
									</div>
										
									<p-fieldset legend="{{'frmMasterRekanan_gmbrLogo' | translate | splitCharT }}">
										<img *ngIf="smbrFile !== null" [src]="(smbrFile | imgsec) | async" width="50%"
											height="auto" class="img-responsive" />
									</p-fieldset>
								</div>
								
								<!-- </div> -->

								<div class="ui-g-12">
									<div class="ui-g-12 ui-md-7"></div>
									<div class="ui-g-12 ui-md-1">
										<button pButton type="button" label="{{'batal'| translate | splitCharT}}" icon="fa-refresh"
											(click)="reset();clearFilter(da,db,dc,dd,de,df)"></button>
									</div>
									<div class="ui-g-12 ui-md-1">
										<button pButton type="submit" label="{{'simpan'| translate | splitCharT}}" icon="fa-save"
											(click)="onSubmit();clearFilter(da,db,dc,dd,de,df)"></button>
									</div>
									<div class="ui-g-12 ui-md-1">
										<button pButton type="button" label="{{'hapus'| translate | splitCharT}}" icon="fa-trash"
											(click)="confirmDelete()" [disabled]="formAktif"></button>
									</div>
									<div class="ui-g-12 ui-md-1">
										<button pButton type="button" label="{{'cetak'| translate | splitCharT}}" icon="fa-print"
											(click)="cetak()"></button>
									</div>
									<div class="ui-g-12 ui-md-1">
										<p-splitButton label="{{'Export'| translate | splitCharT }}" icon="fa-external-link"
											[model]="items"></p-splitButton>
									</div>
								</div>
							</div>
						</form>
					</div>
					<div class="ui-g-12">

						<p-dataTable [value]="listData" [rows]="10" [paginator]="true" [pageLinks]="3"
							[rowsPerPageOptions]="[5,10,20]" selectionMode="single" [(selection)]="selected"
							(onRowSelect)="onRowSelect($event)" [lazy]="true" [loading]="Loading"
							loadingIcon="fa-spinner" [totalRecords]="totalRecords" scrollable="true"
							(onLazyLoad)="loadPage($event)">
							<p-header>
								<div class="ui-helper-clearfix">
									<i class="fa fa-search" style="padding:0.5em 0.5em;float:right"></i>
									<input type="text" pInputText size="50"
										placeholder="{{'frmMasterRekanan_tablePencarian'| translate | splitCharT}}"
										[(ngModel)]="pencarian" (keyup)="cari()" style="width: 20%;float:right;">
									<span
										style="float: left;padding:0.3em;">{{'frmMasterRekanan_tableTitle'| translate | splitCharT}}</span>
								</div>
							</p-header>
							<!-- <p-column expander="true" styleClass="col-icon" [style]="{'width':'50px'}"> </p-column> -->
							<p-column [style]="{'width':'50px'}" header="{{'frmMasterRekanan_tableNo'| translate | splitCharT}}">
								<ng-template let-col let-data="rowData" let-i="rowIndex" pTemplate="body">
									{{i + 1}}
								</ng-template>
							</p-column>
							<p-column field="tglAwal" header="{{'frmMasterRekanan_tableTglAwal' | translate | splitCharT }}"
							[style]="{'width': '100px'}">
							<ng-template pTemplate="body" let-profile="rowData">
							  <span *ngIf="profile.tglAwal != null && profile.tglAwal != 0">
								{{profile.tglAwal * 1000 | date:'dd/MM/yyyy'}}
							  </span>
							  <span *ngIf="profile.tglAwal == null || profile.tglAwal == 0">
								-
							  </span>
							</ng-template>
							  </p-column>
							<p-column field="tglAkhir" header="{{'frmMasterRekanan_tableTglAkhir' | translate | splitCharT }}"
                  			  [style]="{'width': '100px'}">
                  			  <ng-template pTemplate="body" let-profile="rowData">
                    			<span *ngIf="profile.tglAkhir != null && profile.tglAkhir != 0">
                      				{{profile.tglAkhir * 1000 | date:'dd/MM/yyyy'}}
                    			</span>
                    			<span *ngIf="profile.tglAkhir == null || profile.tglAkhir == 0">
                      				-
                    			</span>
                  			  </ng-template>
                			</p-column>
							<p-column field="namaJenisKontak" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableJnsRekanan'| translate | splitCharT}}">
							</p-column>
							<p-column field="namaKontak" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableNamaRekanan'| translate | splitCharT}}">
							</p-column>
							<p-column field="gambarLogo" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableGmbrLogo'| translate | splitCharT}}">
								<ng-template let-pick="rowData" pTemplate type="body">
									<img [src]="(pick.pathImage | imgsec) | async" width="50%" height="auto"
										class="img-responsive" />
								</ng-template>
							</p-column>
							<p-column field="namaNegara" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableNegara'| translate | splitCharT}}">
							</p-column>
							<p-column field="namaPropinsi" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableProvinsi'| translate | splitCharT}}">
							</p-column>
							<p-column field="namaKotaKabupaten" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableKota'| translate | splitCharT}}">
							</p-column>
							<p-column field="namaKecamatan" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableKecamatan'| translate | splitCharT}}">
							</p-column>
							<p-column field="namaDesaKelurahan" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableDesa'| translate | splitCharT}}">
							</p-column>
							<p-column field="rTRW" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableRTRW'| translate | splitCharT}}">
							</p-column>
							<p-column field="alamatLengkap" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableAlmtLengkap'| translate | splitCharT}}">
							</p-column>
							<p-column field="kodePos" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableKdPos'| translate | splitCharT}}">
							</p-column>
							<p-column field="alamatEmail" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableEmail'| translate | splitCharT}}">
							</p-column>
							<p-column field="fixedPhone1" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tablefixedPhone'| translate | splitCharT}}">
							</p-column>
							<p-column field="mobilePhone1" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableHp'| translate | splitCharT}}">
							</p-column>
							<p-column field="faksimile1" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableFx'| translate | splitCharT}}">
							</p-column>
							<p-column field="website" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableWeb'| translate | splitCharT}}">
							</p-column>
							<p-column field="statusEnabled" [style]="{'width':'150px'}"
								header="{{'frmMasterRekanan_tableStts'| translate | splitCharT }}">
								<ng-template let-col="rowData" pTemplate type="body">
									{{col.statusEnabled | truefalse | translate | splitCharT }}
								</ng-template>
							</p-column>
							<!-- <ng-template let-detail pTemplate="rowexpansion">
								<div class="ui-grid ui-grid-responsive ui-fluid" style="padding-left:27px">
									<div class="ui-grid ui-grid-responsive ui-grid-pad">
										<div class="ui-grid-col-12">
											<div class="ui-grid ui-grid-responsive ui-grid-pad">
												<div class="ui-grid-row">
													<div class="ui-grid-col-2 label">
														<span style="color:black">{{ 'optional' | translate | splitCharT }}</span>
													</div>
												</div>
												<hr>
												<div class="ui-grid-row">
													<div class="ui-grid label">{{'reportDisplay'| translate | splitCharT }} </div>
													<div class="ui-grid-col-4"> {{detail.reportDisplay}}</div>
												</div>
												<div class="ui-grid-row">
													<div class="ui-grid label">{{'kodeExternal' | translate | splitCharT}} </div>
													<div class="ui-grid-col-4">{{detail.kodeExternal}}</div>
												</div>
												<div class="ui-grid-row">
													<div class="ui-grid label">{{'namaExternal '| translate | splitCharT}} </div>
													<div class="ui-grid-col-4">{{detail.namaExternal}}</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</ng-template> -->
						</p-dataTable>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>