<div class="ui-fluid">
	<div class="ui-g">
		<div class="ui-g-12">
			<div class="card card-w-title">
				<p-confirmDialog header="Confirmation" icon="fa fa-question-circle" width="425"></p-confirmDialog>
				<form [formGroup]="form">
					<h1>{{'frmMasterBlog_title'| translate | splitCharT }}</h1>
					<div class="ui-g form-group">
						<div style="padding: 0px" class="ui-g-12 ui-md-5">
							<div class="ui-g-12 ui-md-10">
								<label for="input">
									{{'frmMasterBlog_jenisDokumen'| translate | splitCharT }}
								</label>
								<input id="input" disabled="true" maxlength="150" type="text" [(ngModel)]="jenisDokumen"
									[ngModelOptions]="{standalone: true}" (keyup)="setReportDisplay()" pInputText />
							</div>
							<div class="ui-g-12 ui-md-2">
								<br>
								<p-checkbox binary="true" label="{{'frmMasterBlog_status'| translate | splitCharT }}"
									formControlName="statusAktif"></p-checkbox>
								<span *ngIf="!form.get('statusAktif').valid && form.get('statusAktif').touched"
									style="color: red"> *</span>
								<span *ngIf="!form.get('statusAktif').valid && form.get('statusAktif').touched"
									style="color: red">
									{{'required'| translate | splitCharT}}</span>
							</div>
							<div class="ui-g-12 ui-md-12">
								<label for="input">
									{{'frmMasterBlog_judulBlog'| translate | splitCharT }}
									<span style="color: red;font-weight: bolder;">*</span>
									<span *ngIf="!form.get('judulBlog').valid && form.get('judulBlog').touched"
										style="color: red"> {{'required'| translate | splitCharT}}</span>
								</label>
								<input id="input" maxlength="150" type="text" formControlName="judulBlog"
									(keyup)="setReportDisplay()" pInputText />
							</div>
						</div>
						<div class="ui-g-12 ui-md-4">
							<p-fieldset [style]="{'min-height':'86px'}" legend="Periode Berlaku">
								<form [formGroup]="form">
									<div style="padding: 0px" class="ui-g-12 ui-md-5">
										<app-calender [monthNavigator]="true" [yearNavigator]="true"
											yearRange="2000:2030" showTime="showTime" hourFormat="24"
											formControlName="tglAwal" [showIcon]="true" dateFormat="dd M yy">
										</app-calender>
									</div>
									<div class="ui-g-12 ui-md-1"><label> - </label></div>
									<div style="padding: 0px" class="ui-g-12 ui-md-5">
										<app-calender [monthNavigator]="true" [yearNavigator]="true"
											yearRange="2000:2030" showTime="showTime" hourFormat="24"
											formControlName="tglAkhir" [showIcon]="true" dateFormat="dd M yy">
										</app-calender>
									</div>
								</form>
							</p-fieldset>
						</div>
						<div class="ui-g-12 ui-md-3">
							<p-fieldset legend="Optional" [toggleable]="true" [collapsed]="true">
								<form [formGroup]="form">
									<div class="ui-g-12 ui-md-10">
										<label for="input">{{'frmMasterBlog_reportDisplay'| translate | splitCharT }}
											<span
												*ngIf="!form.get('tampilanLaporan').valid && form.get('tampilanLaporan').touched"
												style="color: red">*</span>
											<span
												*ngIf="!form.get('tampilanLaporan').valid && form.get('tampilanLaporan').touched"
												style="color: red"> {{'required'| translate | splitCharT}}</span>
										</label>
										<input id="input" maxlength="150" type="text" formControlName="tampilanLaporan"
											[(ngModel)]="report" pInputText />
									</div>
									<div class="ui-g-12 ui-md-10">
										<label
											for="input">{{'frmMasterBlog_kodeExternal'| translate | splitCharT }}</label>
										<input type="text" maxlength="15" formControlName="kodeExternal" pInputText />
									</div>
									<div class="ui-g-12 ui-md-10">
										<label
											for="input">{{'frmMasterBlog_namaExternal'| translate | splitCharT }}</label>
										<input type="text" maxlength="150" formControlName="namaExternal" pInputText />
									</div>
								</form>
							</p-fieldset>
						</div>
						<div class="ui-g-12 ui-md-12">
							<!-- <p-blockUI [target]="pnl1" [blocked]="dokumen1" [baseZIndex]=10 [autoZIndex]="false">
								<i class="fa fa-lock fa-5x" style="position:absolute;top:25%;left:50%"></i>
							</p-blockUI>
							<p-blockUI [target]="pnl2" [blocked]="dokumen2" [baseZIndex]=10 [autoZIndex]="false">
								<i class="fa fa-lock fa-5x" style="position:absolute;top:25%;left:50%"></i>
							</p-blockUI>
							<p-blockUI [target]="pnl3" [blocked]="dokumen3" [baseZIndex]=10 [autoZIndex]="false">
								<i class="fa fa-lock fa-5x" style="position:absolute;top:25%;left:50%"></i>
							</p-blockUI> -->
							<p-fieldset legend="{{'frmDokumen_isiDokumen'| translate | splitCharT}}">
								<div style="padding: 0px" class="ui-g-12 ui-md-10">
									<div style="padding: 0px" class="ui-g-12 ui-md-12">
										<!-- <p-radioButton value="textEditor" [(ngModel)]="uploadData"
											[ngModelOptions]="{standalone: true}"
											label="{{'frmDokumen_isiTeksDokumen'| translate | splitCharT}}"
											(ngModelChange)="getPilihIsi($event)"></p-radioButton> -->
										<span>Text Editor</span>
									</div>
									<div class="ui-g-12 ui-md-12">
										<p-panel #pnl1>
											<p-editor [(ngModel)]="isiDokumen" [ngModelOptions]="{standalone: true}"
												id="texteditor" [style]="{'height':'215px'}"></p-editor>
										</p-panel>
									</div>
								</div>
								<div style="padding: 0px" class="ui-g-12 ui-md-2">
									<!-- <div class="ui-g-12 ui-md-12">
										<p-radioButton value="file" [(ngModel)]="uploadData"
											[ngModelOptions]="{standalone: true}"
											label="{{'frmDokumen_isiFileDokumen'| translate | splitCharT}}"
											(ngModelChange)="getPilihIsi($event)"></p-radioButton>
										<p-panel class="ui-float-label" #pnl2>
											<span>
												<p-fileUpload mode="basic" class="ui-inputwrapper-filled"
													(onUpload)="fileUpload($event)" accept=".doc,.docx,.pdf,.mp4"
													name="file" maxFileSize="1000000" (onBeforeSend)="addHeader($event)"
													auto="true" [url]="urlUpload()" withCredentials="true"
													chooseLabel="{{'frmDokumen_pilihFile'| translate | splitCharT}}"
													[showCancelButton]="false">
												</p-fileUpload>
											</span>
											<input id="filePath" type="text" formControlName="pathFile"
												[(ngModel)]="namaFile" disabled pInputText />
										</p-panel>
									</div> -->
									<div style="padding: 0px" class="ui-g-12 ui-md-12">
										<span>Header Gambar Blog</span>
									</div>
									<div style="padding: 0px" class="ui-g-12 ui-md-12">
										<!-- <p-radioButton value="gambar" [(ngModel)]="uploadData"
											[ngModelOptions]="{standalone: true}"
											label="{{'frmDokumen_isiGambarDokumen'| translate | splitCharT}}"
											(ngModelChange)="getPilihIsi($event)"></p-radioButton> -->
										<p-panel class="ui-float-label" #pnl3>
											<span>
												<p-fileUpload mode="basic" class="ui-inputwrapper-filled"
													(onUpload)="imageUpload($event)" accept="image/*" name="file"
													maxFileSize="1000000" (onBeforeSend)="addHeader($event)" auto="true"
													[url]="urlUpload()" withCredentials="true"
													chooseLabel="{{'frmDokumen_pilihGambar'| translate | splitCharT}}"
													[showCancelButton]="false">
												</p-fileUpload>
											</span>
											<input hidden id="imagePath" type="text" formControlName="imageFile"
												[(ngModel)]="namaImage" disabled pInputText />
										</p-panel>
									</div>
									<div style="text-align: center;" class="ui-g-12 ui-md-12">
										<img *ngIf="smbrImage !== null"
											style="max-height: 100px; height: 100px; width: auto; max-width: 160px"
											[src]="smbrImage" width="140px" class="img-responsive" />
									</div>
									<div class="ui-g-12 ui-md-12">
										<button pButton type="submit"
											label="{{'frmMasterBlog_btnSimpan'| translate | splitCharT}}" icon="fa-save"
											(click)="onSubmit()"></button>
									</div>
									<div class="ui-g-12 ui-md-12">
										<button pButton type="button"
											label="{{'frmMasterBlog_btnHapus'| translate | splitCharT}}" icon="fa-trash"
											(click)="confirmDelete()"></button>
									</div>
									<div class="ui-g-12 ui-md-12">
										<button pButton type="button"
											label="{{'frmMasterBlog_btnBatal'| translate | splitCharT}}"
											icon="fa-refresh" (click)="reset()"></button>
									</div>
								</div>
							</p-fieldset>
						</div>
					</div>
				</form>



				<form [formGroup]="formCari">
					<div style="float: right" class="ui-g-12 ui-md-1">
						<button pButton type="button" label="{{'frmMonitoringubs_Reset'| translate | splitCharT}}"
							icon="fa-refresh" (click)="resetPencarian()"></button>
					</div>
					<div style="float: right" class="ui-g-12 ui-md-1">
						<button pButton type="button" label="{{'frmMonitoringubs_Cari'| translate | splitCharT}}"
							icon="fa-search" (click)="cari(1, 10, '')"></button>
					</div>
					<div style="width:15%;float:right;margin: 3px;margin-right: 4px;margin-top: 7px;font-size: 12px">
						<app-calender [monthNavigator]="true" showTime="showTime" hourFormat="24" [yearNavigator]="true"
							yearRange="2000:2030" formControlName="tglAkhir" [showIcon]="true" dateFormat="dd M yy">
						</app-calender>
					</div>
					<div style="width:15%;float:right;margin: 3px;margin-right: 4px;margin-top: 7px;font-size: 12px">
						<app-calender [monthNavigator]="true" showTime="showTime" hourFormat="24" [yearNavigator]="true"
							yearRange="2000:2030" formControlName="tglAwal" [showIcon]="true" dateFormat="dd M yy">
						</app-calender>
					</div>
					<div style="width:30%;float:right;margin: 3px;margin-right: 4px;margin-top: 7px;font-size: 12px">
						<i class="fa fa-search" style="padding:0.5em 0.5em;float:right"></i>
						<input type="text" pInputText size="50"
							placeholder="{{'frmMonitoringubs_pencarian'| translate | splitCharT}}"
							[(ngModel)]="pencarian" [ngModelOptions]="{standalone: true}" (keyup)="cari(1, 10, '')"
							style="width: 60%;float:right;">
					</div>
					<div style="width:20%;float:left;margin: 3px;margin-right: 4px;margin-top: 7px;font-size: 12px">
						<strong><span
								style="float: left;padding:0.3em;">{{'frmMasterBlog_tableTitle'| translate | splitCharT}}</span></strong>
					</div>
				</form>
				<div class="ui-g-12 ui-fluid">
					<p-dataTable [value]="listData" [rows]="10" [paginator]="true" [pageLinks]="3"
						[rowsPerPageOptions]="[5,10,20]" selectionMode="single" [(selection)]="selected"
						(onRowSelect)="onRowSelect($event)" [lazy]="true" [loading]="loading" loadingIcon="fa-spinner"
						[totalRecords]="totalRecords" (onLazyLoad)="loadPage($event)" scrollable="true"
						expandableRows="true">
						<p-header>
						</p-header>
						<p-column expander="true" styleClass="col-icon" [style]="{'width':'50px'}"></p-column>
						<p-column [style]="{'width':'30px'}" header="{{'frmMasterBlog_No'| translate | splitCharT }}">
							<ng-template pTemplate="body" let-i="rowIndex">
								{{i+1}}
							</ng-template>
						</p-column>
						<p-column field="judulBlog" header="{{'frmMasterBlog_judulBlog'| translate | splitCharT }}">
						</p-column>
						<p-column field="tglAwal"
							header="{{'frmMonitoringUserBaru_tglBerlakuAwal'| translate | splitCharT }}">
							<ng-template let-row="rowData" pTemplate="body">
								{{row.tglAwal | date:'dd/MM/yyyy HH:mm'}}
							</ng-template>
						</p-column>
						<p-column field="tglAkhir"
							header="{{'frmMonitoringUserBaru_tglBerlakuAkhir'| translate | splitCharT }}">
							<ng-template let-row="rowData" pTemplate="body">
								{{row.tglAkhir | date:'dd/MM/yyyy HH:mm'}}
							</ng-template>
						</p-column>
						<p-column field="image" header="{{'frmMasterBlog_imageblog'| translate | splitCharT }}">
							<ng-template let-pick="rowData" pTemplate type="body">
								<img *ngIf="pick.image != null" [src]="(pick.image | imgsec) | async" width="20%"
									height="54px" class="img-responsive" />
								<span *ngIf="pick.image == null">-</span>
							</ng-template>
						</p-column>
						<p-column field="statusAktif" header="{{'frmMasterBlog_tableStatus'| translate | splitCharT }}">
							<ng-template let-col="rowData" pTemplate type="body">
								{{col.statusAktif | truefalse | translate | splitCharT }}
							</ng-template>
						</p-column>
						<ng-template let-data pTemplate="rowexpansion">
							<div class="ui-grid ui-grid-responsive ui-fluid" style="padding-left:27px">
								<div class="ui-grid ui-grid-responsive ui-grid-pad">
									<div class="ui-grid-col-12">
										<div class="ui-grid ui-grid-responsive ui-grid-pad">
											<div class="ui-grid-row">
												<div class="ui-grid-col-2 label">
													<span
														style="color:black">{{ 'frmMasterBlog_isiblog' | translate | splitCharT}}</span>
												</div>
											</div>
											<hr>
											<div class="ui-grid-row">
												<div class="ui-grid-col-12">
													<p [innerHTML]="data.isiBlog"></p>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</ng-template>
					</p-dataTable>
				</div>
			</div>
		</div>
	</div>
</div>