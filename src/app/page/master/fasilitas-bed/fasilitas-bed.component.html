<div class="ui-fluid">
    <div class="ui-g">
        <div class="ui-g-12">
            <div class="card card-w-title">
                <p-confirmDialog header="Confirmation" icon="fa fa-question-circle" width="425"></p-confirmDialog>
                <h1>{{ 'frmFasilitasBed_title' | translate | splitCharT  }}</h1>
                <div class="ui-g form-group">
                    <div class="ui-g-12"> 
                        <form [formGroup]="form" (ngSubmit)="onSubmit()">
                            <div class="ui-g form-group">
                                <div class="ui-g-12 ui-md-6">
                                    <div class="ui-g-12 ui-md-7">
                                        <label>{{'frmFasilitasBed_kdRuangan'| translate | splitCharT }}
                                            <span style="color: red;font-weight: bolder;">*</span>
                                            <span
                                                *ngIf="!form.get('kdRuangan').valid && form.get('kdRuangan').touched"
                                                style="color: red">{{'required'| translate | splitCharT}}</span>
                                        </label>
                                        <p-dropdown #da filter="filter" class="ui-inputwrapper-filled"
                                            formControlName="kdRuangan" [options]="dropdownRuangan"
                                            [autoWidth]="false" resetFilterOnHide="true" (onChange)="getKelasByRuangan(form.get('kdRuangan').value,'')" [disabled]="!formAktif"></p-dropdown>
                                    </div>
                                    <div class="ui-g-12 ui-md-5">
                                        <label>{{'frmFasilitasBed_kdKelasKamar'| translate | splitCharT }}
                                            <span style="color: red;font-weight: bolder;">*</span>
                                            <span
                                                *ngIf="!form.get('kdKelasKamar').valid && form.get('kdKelasKamar').touched"
                                                style="color: red">{{'required'| translate | splitCharT}}</span>
                                        </label>
                                        <p-dropdown #db filter="filter" class="ui-inputwrapper-filled"
                                            formControlName="kdKelasKamar" [options]="dropdownKelasKamar"
                                            [autoWidth]="false" resetFilterOnHide="true" (onChange)="getFasilitasDetail(form.get('kdRuangan').value,form.get('kdKelasKamar').value,'')" [disabled]="!formAktif"></p-dropdown>
                                    </div>
                                    <div class="ui-g-12 ui-md-7">
                                        <label>{{'frmFasilitasBed_kdKamar'| translate | splitCharT }}
                                            <span style="color: red;font-weight: bolder;">*</span>
                                            <span
                                                *ngIf="!form.get('kdKamar').valid && form.get('kdKamar').touched"
                                                style="color: red">{{'required'| translate | splitCharT}}</span>
                                        </label>
                                        <p-dropdown #dc filter="filter" class="ui-inputwrapper-filled"
                                            formControlName="kdKamar" [options]="dropdownKamar"
                                            [autoWidth]="false" resetFilterOnHide="true" (onChange)="setFasilitasDetail(form.get('kdKamar').value)" [disabled]="!formAktif"></p-dropdown>
                                    </div>       
                                    <div class="ui-g-12 ui-md-5">
                                        <label>{{'frmFasilitasBed_kdBed'| translate | splitCharT }}
                                            <span style="color: red;font-weight: bolder;">*</span>
                                            <span
                                                *ngIf="!form.get('kdBed').valid && form.get('kdBed').touched"
                                                style="color: red">{{'required'| translate | splitCharT}}</span>
                                        </label>
                                        <p-dropdown #dd filter="filter" class="ui-inputwrapper-filled"
                                            formControlName="kdBed" [options]="dropdownBed"
                                            [autoWidth]="false" resetFilterOnHide="true" [disabled]="!formAktif"></p-dropdown>
                                    </div>                                                                
                                    <div class="ui-g-12 ui-md-7">
                                        <label>{{'frmFasilitasBed_kdFasilitasDetail'| translate | splitCharT }}
                                            <span style="color: red;font-weight: bolder;">*</span>
                                            <span
                                                *ngIf="!form.get('kdFasilitasDetail').valid && form.get('kdFasilitasDetail').touched"
                                                style="color: red">{{'required'| translate | splitCharT}}</span>
                                        </label>
                                        <p-dropdown #de filter="filter" class="ui-inputwrapper-filled"
                                            formControlName="kdFasilitasDetail" [options]="dropdownFasilitasDetail"
                                            [autoWidth]="false" resetFilterOnHide="true" [disabled]="!formAktif"></p-dropdown>
                                    </div>
                                    <div class="ui-g-12 ui-md-5">
                                        <label>{{'frmFasilitasBed_kdStatusBed'| translate | splitCharT }}
                                            <span style="color: red;font-weight: bolder;">*</span>
                                            <span
                                                *ngIf="!form.get('kdStatusBed').valid && form.get('kdStatusBed').touched"
                                                style="color: red">{{'required'| translate | splitCharT}}</span>
                                        </label>
                                        <p-dropdown #df filter="filter" class="ui-inputwrapper-filled"
                                            formControlName="kdStatusBed" [options]="dropdownStatusBed"
                                            [autoWidth]="false" resetFilterOnHide="true"></p-dropdown>
                                    </div>
                                     <div class="ui-g-12 ui-md-5">
                                        <br>
                                        <p-checkbox binary="true" label="{{'frmFasilitasBed_statusAktif'| translate | splitCharT }}" formControlName="statusEnabled"></p-checkbox>
                                    </div>
                                </div>
                                <div class="ui-g-12">
                                    <div class="ui-g-12 ui-md-7"></div>
                                    <div class="ui-g-12 ui-md-1">
                                        <button pButton type="button" label="{{'frmFasilitasBed_btnBatal'| translate | splitCharT}}"
                                            icon="fa-refresh" (click)="reset();clearFilter(da,db,dc,dd,de,df)"></button>
                                    </div>
                                    <div class="ui-g-12 ui-md-1">
                                        <button pButton type="button" label="{{'frmFasilitasBed_btnSimpan'| translate | splitCharT}}"
                                            icon="fa-save" (click)="onSubmit();clearFilter(da,db,dc,dd,de,df)"></button>
                                    </div>
                                    <div class="ui-g-12 ui-md-1">
                                        <button pButton type="button" label="{{'frmFasilitasBed_btnHapus'| translate | splitCharT}}"
                                            icon="fa-trash" (click)="confirmDelete()"></button>
                                    </div>
                                    <div class="ui-g-12 ui-md-1">
                                        <button pButton type="button" label="{{'frmFasilitasBed_btnCetak'| translate | splitCharT}}"
                                            icon="fa-print" (click)="cetak()"></button>
                                    </div>
                                    <div class="ui-g-12 ui-md-1">
                                        <p-splitButton label="{{'frmFasilitasBed_btnExport'| translate | splitCharT }}" icon="fa-external-link"
                                            [model]="items"></p-splitButton>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="ui-g-12">
                        <p-dataTable [value]="listData" [rows]="10" [paginator]="true" [pageLinks]="3"
                            [rowsPerPageOptions]="[5,10,20]" selectionMode="single" [(selection)]="selected"
                            (onRowSelect)="onRowSelect($event)" [lazy]="true" [loading]="loading"
                            loadingIcon="fa-spinner" [totalRecords]="totalRecords" (onLazyLoad)="loadPage($event)"
                            expandableRows="true">

                            <p-header>
                                <div class="ui-helper-clearfix">
                                    <i class="fa fa-search" style="padding:0.5em 0.5em;float:right"></i>
                                    <input type="text" pInputText size="50"
                                        placeholder="{{'frmFasilitasBed_DaftarRuanganPencarian'| translate | splitCharT}}"
                                        [(ngModel)]="pencarian" (keyup)="cari()" style="width: 20%;float:right;">
                                    <span
                                        style="float: left;padding:0.3em;">{{'frmFasilitasBed_DaftarFasilitasTitle'| translate | splitCharT }}</span>
                                </div>
                            </p-header>
                            <p-column header="{{'frmFasilitasBed_tableNo' | translate | splitCharT }}" [style]="{'width':'50px'}">
                                <ng-template pTemplate="body" let-i="rowIndex">
                                    {{i+1}}
                                </ng-template>
                            </p-column>
                            <p-column field="namaRuangan" header="{{'frmFasilitasBed_kdRuangan'| translate | splitCharT}}"></p-column>
                            <p-column field="namaKelas" header="{{'frmFasilitasBed_kdKelasKamar'| translate | splitCharT}}"></p-column>
                            <p-column field="naNoFasilitasDetail" header="{{'frmFasilitasBed_kdKamar'| translate | splitCharT}}"></p-column>
                            <p-column field="noBed" header="{{'frmFasilitasBed_kdBed'| translate | splitCharT}}">
                                <ng-template let-col="rowData" pTemplate type="body">
                                    {{col.kode.noBed}}
                                </ng-template>
                            </p-column>
                            <p-column field="deskripsiFasilitasDetail" header="{{'frmFasilitasBed_kdFasilitasDetail'| translate | splitCharT}}"></p-column>
                            <p-column field="namaStatusBed" header="{{'frmFasilitasBed_kdStatusBed'| translate | splitCharT}}"></p-column>
                            <p-column field="statusEnabled" header="{{'frmFasilitasBed_tableStatus'| translate | splitCharT }}">
                                <ng-template let-col="rowData" pTemplate type="body">
                                    {{col.statusEnabled | truefalse | translate | splitCharT }}
                                </ng-template>
                            </p-column>                            
                        </p-dataTable>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>