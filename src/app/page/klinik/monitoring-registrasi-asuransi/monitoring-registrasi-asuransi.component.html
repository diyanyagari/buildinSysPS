<div class="ui-fluid">
  <div class="ui-g">
    <div class="ui-g-12">
      <div class="card card-w-title">
        <p-dialog header="{{'frmRegistrasiAsuransi_RegistrasiAsuransi' | translate | splitCharT }}" [(visible)]="registrasiDialog"
          modal="modal" width="{{widthScreens}}" (onHide)="onCloseDialog()">
          <form [formGroup]="form">
            <div class="ui-g form-group">
              <div class="ui-g-12 ui-md-12">
                <div class="ui-helper-clearfix" style="
                padding-bottom: 0px;
                margin-top: -1vh;
                position: absolute;
                width: 62.8vw;
            ">
                  <a class="fa fa-angle-left"
                    style="padding:0.2em 0.2em;float:right;margin-top:-7px;display:block;margin-right: 5px;font-size: 2em"
                    (click)="tglDaftarOpen()" id="tglDaftarPencarianOpen"
                    title="{{'Pencarian tglDaftar' | translate | splitCharT}}"></a>
                  <div class="div-tgldaftar" id="tglDaftarPencarian">
                    <div class="div-kalender">
                      <form [formGroup]="form">
                        <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahun}}"
                          formControlName="tglDaftar" [showIcon]="true" dateFormat="dd M yy" [showTime]="true"
                          appendTo="body">
                        </app-calender>
                      </form>

                    </div>
                    <div class="div-label">
                      <label>{{'frmRegistrasiPasienBaru_tglPendaftaran' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('tglDaftar').valid && form.get('tglDaftar').touched"
                          style="color: red">*</span>
                      </label>
                    </div>
                  </div>
                  <a class="fa fa-angle-right"
                    style="padding:0.2em 0.2em;float:right;margin-top:-7px;display:none;font-size: 2em "
                    (click)="tglDaftarClose()" title="{{'Tutup Tanggal Pendaftaran' | translate | splitCharT}}"
                    id="tglDaftarPencarianClose"></a>
                </div>
                <p-fieldset legend="{{'frmRegistrasiAsuransi_DataPeserta' | translate | splitCharT }}">
                  <div class="ui-g form-group">
                    <div class="ui-g-12 ui-md-12" style="padding: 0px">
                      <div class="ui-g-12 ui-md-4" style="width: 30%">
                        <label>
                          <p-checkbox binary="true" label="{{'frmRegistrasiAsuransi_NamaPasien'| translate | splitCharT}}"
                            [(ngModel)]="pasien" (onChange)="changeManual()" formControlName="pasien"></p-checkbox>
                        </label>
                        <p-dropdown id="dropdownListPegawai" filter="filter" class="ui-inputwrapper-filled"
                          [options]="listPasien" formControlName="kdPasien" [autoWidth]="false"
                          (onChange)="changePeserta($event)">
                        </p-dropdown>
                      </div>
                      <div class="ui-g-12 ui-md-3" style="width: 30%">
                        <label>
                          <p-checkbox binary="true" label="{{'frmRegistrasiAsuransi_NamaPegawai'| translate | splitCharT}}"
                            [(ngModel)]="pegawaiProfile" (onChange)="cekPegawaiProfile()"
                            formControlName="pegawaiProfile">
                          </p-checkbox>
                        </label>
                        <p-dropdown id="dropdownListPegawai" filter="filter" class="ui-inputwrapper-filled"
                          [options]="listPegawai" formControlName="kdPegawai" [autoWidth]="false"
                          (onChange)="changePeserta($event)">
                        </p-dropdown>
                      </div>
                      <div class="ui-g-12 ui-md-2" style="width: 20%">
                        <label>{{'frmRegistrasiAsuransi_NIP(PNS)' | translate | splitCharT }}</label>
                        <input id="input" type="text" formControlName="nip" pInputText />
                      </div>
                      <div class="ui-g-12 ui-md-2" style="width: 20%">
                        <label>{{'frmRegistrasiAsuransi_NIK(NonPNS)' | translate | splitCharT }}</label>
                        <input id="input" type="text" formControlName="nik" pInputText />
                      </div>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 20%">
                      <label>{{'frmRegistrasiAsuransi_PerusahaanAsuransi' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span
                          *ngIf="!form.get('kdPerusahaanAsuransi').valid && form.get('kdPerusahaanAsuransi').touched"
                          style="color: red;font-weight: bolder;">
                          *</span>
                      </label>
                      <p-dropdown id="dropdownListRekanan" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listRekanan" formControlName="kdPerusahaanAsuransi" [autoWidth]="false">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 20%">
                      <label>{{'frmRegistrasiAsuransi_NoPeserta' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('noAsuransi').valid && form.get('noAsuransi').touched"
                          style="color: red;font-weight: bolder;">
                          *</span>
                      </label>
                      <input id="input" type="text" formControlName="noAsuransi" pInputText />
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 18%">
                      <label>{{'frmRegistrasiAsuransi_HubunganPeserta' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('kdHubunganPeserta').valid && form.get('kdHubunganPeserta').touched"
                          style="color: red;font-weight: bolder;">
                          *</span>
                      </label>
                      <p-dropdown id="dropdownListHubunganPeserta" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listHubunganPeserta" formControlName="kdHubunganPeserta" [autoWidth]="false">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 42%">
                      <label>{{'frmRegistrasiAsuransi_NamaLengkapPeserta' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('namaLengkap').valid && form.get('namaLengkap').touched"
                          style="color: red;font-weight: bolder;">
                          *</span>
                      </label>
                      <input id="input" type="text" formControlName="namaLengkap" pInputText />
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 15%">
                      <label>{{'frmRegistrasiAsuransi_TanggalLahir' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('tglLahir').valid && form.get('tglLahir').touched"
                          style="color: red;font-weight: bolder;">
                          *</span>
                      </label>
                      <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahunTglLahir}}"
                        formControlName="tglLahir" [showIcon]="true" dateFormat="dd M yy"></app-calender>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 15%">
                      <label>{{'frmRegistrasiAsuransi_JenisKelamin' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('kdJenisKelamin').valid && form.get('kdJenisKelamin').touched"
                          style="color: red;font-weight: bolder;">
                          *</span>
                      </label>
                      <p-dropdown id="dropdownListJenisKelamin" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listJenisKelamin" formControlName="kdJenisKelamin" [autoWidth]="false">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 18%">
                      <label>{{'frmRegistrasiAsuransi_GolonganAsuransi' | translate | splitCharT }}
                      </label>
                      <p-dropdown id="dropdownListGolonganAsuransi" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listGolonganAsuransi" formControlName="kdGolonganAsuransi" [autoWidth]="false">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 15%">
                      <label>{{'frmRegistrasiAsuransi_KelasDijamin' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('kdKelas').valid && form.get('kdKelas').touched"
                          style="color: red;font-weight: bolder;">
                          *</span>
                      </label>
                      <p-dropdown id="dropdownListKelas" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listKelas" formControlName="kdKelas" [autoWidth]="false">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 21%">
                      <label>{{'frmRegistrasiAsuransi_PerusahaanAsalPeserta' | translate | splitCharT }}
                      </label>
                      <p-dropdown id="dropdownListPerusahaanAsal" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listPerusahaanAsal" formControlName="kdPerusahaanAsal" [autoWidth]="false">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 15%">
                      <label>{{'frmRegistrasiAsuransi_Unit/Bagian' | translate | splitCharT }}
                      </label>
                      <p-dropdown id="dropdownListUnitBagian" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listUnitBagian" formControlName="kdUnitBagian" [autoWidth]="false">
                      </p-dropdown>
                    </div>
                    <!-- <div class="ui-g-12 ui-md-3" style="width: 25%">
                      <label>{{'frmRegistrasiAsuransi_TanggalBerlakuAwal' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('tglBerlakuAwal').valid && form.get('tglBerlakuAwal').touched"
                          style="color: red;font-weight: bolder;">
                          *</span>
                      </label>
                      <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahun}}"
                        formControlName="tglBerlakuAwal" [showIcon]="true" dateFormat="dd M yy" appendTo="body">
                      </app-calender>
                    </div>
                    <div class="ui-g-12 ui-md-3" style="width: 25%">
                      <label>{{'frmRegistrasiAsuransi_TanggalBerlakuAkhir' | translate | splitCharT }}
                      </label>
                      <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahun}}"
                        formControlName="tglBerlakuAkhhir" [showIcon]="true" dateFormat="dd M yy" appendTo="body">
                      </app-calender>
                    </div> -->
                    <p-dataTable [value]="listDetailRegistrasiAsuransi" [rows]="3" [paginator]="true" [pageLinks]="3"
                      [rowsPerPageOptions]="[3]">
                      <p-header>
                        <div class="ui-helper-clearfix">
                          <button pButton type="button" icon="fa-plus" (click)="tambahDataDetailAsuransi()"
                            style="float:left;"></button>
                        </div>
                      </p-header>
                      <p-headerColumnGroup>
                        <p-row>
                          <p-column header="{{'No. '| translate | splitCharT}}" [style]="{'width':'20px','text-align':'center'}">
                          </p-column>
                          <p-column header="{{'frmRegistrasiAsuransi_TanggalBerlakuAwal'| translate | splitCharT}}"
                            [style]="{'width':'72px','text-align':'center'}">
                          </p-column>
                          <p-column header="{{'frmRegistrasiAsuransi_TanggalBerlakuAkhir'| translate | splitCharT}}"
                            [style]="{'width':'72px','text-align':'center'}">
                          </p-column>
                          <p-column header="{{'frmRegistrasiAsuransi_TotalPlafon'| translate | splitCharT}}"
                            [style]="{'width':'90px','text-align':'center'}">
                          </p-column>
                          <p-column header="{{'frmRegistrasiAsuransi_TotalTerpakai'| translate | splitCharT}}"
                            [style]="{'width':'90px','text-align':'center'}">
                          </p-column>
                          <p-column header="{{'frmRegistrasiAsuransi_TotalSisaSaldo'| translate | splitCharT}}"
                            [style]="{'width':'90px','text-align':'center'}">
                          </p-column>
                          <p-column header="{{'frmRegistrasiAsuransi_isCollectivePlafon'| translate | splitCharT}}"
                            [style]="{'width':'40px','text-align':'center'}">
                          </p-column>
                          <p-column header="{{'frmRegistrasiAsuransi_StatusEnabled'| translate | splitCharT}}"
                            [style]="{'width':'30px','text-align':'center'}">
                          </p-column>
                          <p-column styleClass="col-button" name="tesst" [style]="{'width':'25px'}">
                          </p-column>
                        </p-row>
                      </p-headerColumnGroup>
                      <p-column [style]="{'width':'20px'}">
                        <ng-template pTemplate="body" let-ri="rowIndex">
                          {{ri+1}}
                        </ng-template>
                      </p-column>
                      <p-column field="tglAwalBerlakuLast" [style]="{'width':'72px'}">
                        <ng-template pTemplate type="body" let-col let-data="rowData" let-i="rowIndex">
                          <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahun}}"
                            [showIcon]="true" [ngModelOptions]="{standalone: true}" dateFormat="dd M yy" appendTo="body"
                            [(ngModel)]="data[col.field]">
                          </app-calender>
                        </ng-template>
                      </p-column>
                      <p-column field="tglAkhirBerlakuLast" [style]="{'width':'72px'}">
                        <ng-template pTemplate type="body" let-col let-data="rowData" let-i="rowIndex">
                          <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahun}}"
                            [showIcon]="true" [ngModelOptions]="{standalone: true}" dateFormat="dd M yy" appendTo="body"
                            [(ngModel)]="data[col.field]">
                          </app-calender>
                        </ng-template>
                      </p-column>
                      <p-column field="totalPlafon" [style]="{'width':'90px'}">
                        <ng-template pTemplate type="body" let-col let-data="rowData" let-i="rowIndex">
                          <p-spinner id="input" [min]="0" type="text" [(ngModel)]="data[col.field]"
                            [ngModelOptions]="{standalone: true}" appendTo="body" placeholder="0"></p-spinner>
                        </ng-template>
                      </p-column>
                      <p-column field="totalTerpakai" [style]="{'width':'90px'}">
                        <ng-template pTemplate type="body" let-col let-data="rowData" let-i="rowIndex">
                          <p-spinner id="input" [min]="0" type="text" [(ngModel)]="data[col.field]"
                            [ngModelOptions]="{standalone: true}" appendTo="body" placeholder="0"></p-spinner>
                        </ng-template>
                      </p-column>
                      <p-column field="totalSisaSaldo" [style]="{'width':'90px'}">
                        <ng-template pTemplate type="body" let-col let-data="rowData" let-i="rowIndex">
                          <p-spinner id="input" [min]="0" type="text" [(ngModel)]="data[col.field]"
                            [ngModelOptions]="{standalone: true}" appendTo="body" placeholder="0"></p-spinner>
                        </ng-template>
                      </p-column>
                      <p-column field="isCollectivePlafon" [style]="{'width':'40px','text-align':'center'}">
                        <ng-template pTemplate type="body" let-col let-data="rowData" let-i="rowIndex">
                          <p-checkbox binary="true" [ngModelOptions]="{standalone: true}" appendTo="body"
                            [(ngModel)]="data[col.field]"></p-checkbox>
                        </ng-template>
                      </p-column>
                      <p-column field="statusEnabled" [style]="{'width':'30px','text-align':'center'}">
                        <ng-template pTemplate type="body" let-col let-data="rowData" let-i="rowIndex">
                          <p-checkbox binary="true" [ngModelOptions]="{standalone: true}" appendTo="body"
                            [(ngModel)]="data[col.field]"></p-checkbox>
                        </ng-template>
                      </p-column>
                      <p-column styleClass="col-button" name="tesst" [style]="{'width':'25px'}">
                        <ng-template pTemplate type="body" let-col let-data="rowData" let-ri="rowIndex">
                          <button type="button" pButton (click)="hapusDetailAsuransi(ri)" icon="fa-trash"></button>
                        </ng-template>
                      </p-column>
                    </p-dataTable>
                  </div>
                </p-fieldset>
              </div>
              <div class="ui-g-12 ui-md-12">
                <p-fieldset legend="{{'frmRegistrasiAsuransi_DataAlamatPeserta' | translate | splitCharT }}">
                  <div class="ui-g form-group">
                    <div class="ui-g-12 ui-md-2">
                      <label>{{'frmRegistrasiAsuransi_jenisAlamat' | translate | splitCharT }}
                        <span style="color: red;font-weight: bolder;">*</span>
                        <span *ngIf="!form.get('kdJenisAlamat').valid && form.get('kdJenisAlamat').touched"
                          style="color: red">*</span>
                      </label>
                      <p-dropdown id="dropdownListJenisAlamat" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listJenisAlamat" formControlName="kdJenisAlamat" [autoWidth]="false">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-9">
                      <label>{{'frmRegistrasiAsuransi_alamatLengkap' | translate | splitCharT }}
                      </label>
                      <input id="input" type="text" formControlName="alamatLengkap" pInputText />
                    </div>
                    <div class="ui-g-12 ui-md-1">
                      <label>{{'frmRegistrasiAsuransi_RT/RW' | translate | splitCharT }}</label>
                      <p-inputMask id="input" type="text" formControlName="rtrw" mask="999/999" placeholder="___/___">
                      </p-inputMask>
                    </div>
                    <div class="ui-g-12 ui-md-4">
                      <label>{{'frmRegistrasiAsuransi_negara' | translate | splitCharT }}
                      </label>
                      <p-dropdown id="dropdownListNegara" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listNegara" formControlName="kdNegara" [autoWidth]="false"
                        (onChange)="changeNegara($event,'negara')" (keyup)="onKeyUpFilterNegara($event)">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-4">
                      <label>{{'frmRegistrasiAsuransi_Provinsi' | translate | splitCharT }}</label>
                      <p-dropdown id="dropdownListPropinsi" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listPropinsi" formControlName="kdPropinsi" [autoWidth]="false"
                        (onChange)="changePropinsi($event,'propinsi')" (keyup)="onKeyUpFilterPropinsi($event)">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-4">
                      <label>{{'frmRegistrasiAsuransi_kotaKabupaten' | translate | splitCharT }}</label>
                      <p-dropdown id="dropdownListKotaKabupaten" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listKotaKabupaten" formControlName="kdKotaKabupaten" [autoWidth]="false"
                        (onChange)="changeKotaKabupaten($event,'kotaKabupaten')"
                        (keyup)="onKeyUpFilterKotaKabupaten($event)">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-4">
                      <label>{{'frmRegistrasiAsuransi_kecamatan' | translate | splitCharT }}</label>
                      <p-dropdown id="dropdownListKecamatan" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listKecamatan" formControlName="kdKecamatan" [autoWidth]="false"
                        (onChange)="changeKecamatan($event,'kecamatan')" (keyup)="onKeyUpFilterKecamatan($event)">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-4">
                      <label>{{'frmRegistrasiAsuransi_kelurahan' | translate | splitCharT }}</label>
                      <p-dropdown id="dropdownListDesaKelurahan" filter="filter" class="ui-inputwrapper-filled"
                        [options]="listDesaKelurahan" formControlName="kdDesaKelurahan" [autoWidth]="false"
                        (onChange)="changeDesaKelurahan($event,'desa')" (keyup)="onKeyUpFilterDesaKelurahan($event)">
                      </p-dropdown>
                    </div>
                    <div class="ui-g-12 ui-md-2">
                      <label>{{'frmRegistrasiAsuransi_kodePos' | translate | splitCharT }}</label>
                      <input id="input" type="text" formControlName="kodePos" pInputText readonly />
                    </div>
                  </div>
                </p-fieldset>
              </div>

            </div>
          </form>
          <p-footer>
            <button type="button" pButton icon="fa-save" (click)="onSubmit()"
              label="{{'frmRegistrasiAsuransi_Simpan' | translate | splitCharT }}" [disabled]="buttonAktifSave"></button>
            <button type="button" pButton icon="fa-close" (click)="clear()"
              label="{{'frmRegistrasiAsuransi_Batal' | translate | splitCharT }}"></button>
          </p-footer>
        </p-dialog>
        <p-dialog header="{{'frmRegistrasiAsuransi_DialogDetailAsuransi' | translate | splitCharT }}"
          [(visible)]="detailAsuransiDialog" modal="modal" width="600">
          <p-dataTable [value]="listDetailAsuransi" [editable]="true" scrollable="true">
            <p-column field="tglBerlakuAkhir" header="{{'frmMonitoringRegistrasiAsuransi_TanggalBerlaku' | translate | splitCharT }}">
              <ng-template pTemplate="body" let-monitoring="rowData">
                <span>
                  {{monitoring.id.tglBerlakuAwal  * 1000 | date:'dd MMM yyyy'}} - </span>
                <span *ngIf="monitoring.tglBerlakuAkhir != null && monitoring.tglBerlakuAkhir != ''">
                  {{monitoring.tglBerlakuAkhir  * 1000 | date:'dd MMM yyyy'}}</span>
                <span
                  *ngIf="monitoring.tglBerlakuAkhir == null || monitoring.tglBerlakuAkhir == '' || monitoring.tglBerlakuAkhir == 0">
                  {{'frmMonitoringRegistrasiAsuransi_Seterusnya' | translate | splitCharT }}</span>
              </ng-template>
            </p-column>
            <p-column field="totalCurrentTerpakai"
              header="{{'frmMonitoringRegistrasiAsuransi_TotalPlafon' | translate | splitCharT }}"
              [style]="{'width':'130px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}">
              <ng-template pTemplate="body" let-monitoring="rowData">
                <span>
                  {{setHarga(monitoring.totalCurrentTerpakai)}}</span>
              </ng-template>
            </p-column>
            <p-column field="totalPlafonTanggungan"
              header="{{'frmMonitoringRegistrasiAsuransi_TotalTerpakai' | translate | splitCharT }}"
              [style]="{'width':'130px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}">
              <ng-template pTemplate="body" let-monitoring="rowData">
                <span>
                  {{setHarga(monitoring.totalPlafonTanggungan)}}</span>
              </ng-template>
            </p-column>
            <p-column field="totalSaldoTanggungan"
              header="{{'frmMonitoringRegistrasiAsuransi_TotalSisaSaldo' | translate | splitCharT }}"
              [style]="{'width':'130px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}">
              <ng-template pTemplate="body" let-monitoring="rowData">
                <span>
                  {{setHarga(monitoring.totalSaldoTanggungan)}}</span>
              </ng-template>
            </p-column>
          </p-dataTable>
          <p-footer>
          </p-footer>
        </p-dialog>
        <h1>
          <div class="ui-helper-clearfix">
            <button style="float:right;display:block;" pButton type="button"
              title="{{'frmMonitoringRegistrasiAsuransi_TambahPesertaAsuransi' | translate | splitCharT }}" icon="{{iconTambahEdit}}"
              (click)="tambahPeserta()" [disabled]="buttonAktif"></button>

            <button style="float:right;display:block;" pButton type="button"
              title="{{'frmMonitoringRegistrasiAsuransi_HapusPencarian' | translate | splitCharT }}" icon="fa-refresh"
              (click)="clearPencarian()" [disabled]="buttonAktif"></button>

            <a class="fa fa-angle-left"
              style="padding:0.2em 0.2em;float:right;margin-top:-7px;display:block;margin-right: 5px;font-size: 2em"
              (click)="periodeOpen()" id="periodePencarianOpen"
              title="{{'frmMonitoringRegistrasiAsuransi_PencarianPeriode' | translate | splitCharT}}"></a>
            <div
              style="border:1px solid #c1c1c1;width:28%;float:right;border-radius: 5px;display:none;margin-right: 5px; margin-top: -4px"
              id="periodePencarian">
              <div style="width:8%;float:right;margin: 3px;margin-right: 10px">
                <button tyle="width: 100%" pButton type="button" icon="fa-search" (click)="cari()"
                  [disabled]="buttonAktif"></button>
              </div>

              <div style="width:39%;float:right;margin: 3px;margin-top: 7px;font-size: 12px">
                <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahun}}"
                  [(ngModel)]="tanggalAkhir" [showIcon]="true" dateFormat="dd M yy"
                  placeholder="{{'frmMonitoringRegistrasiAsuransi_PeriodeAkhir'| translate | splitCharT }}" [showTime]="true"
                  (onSelect)="setTglPencarian($event,'akhir')"></app-calender>
              </div>
              <div style="width:2%;float:right;text-align: center;margin: 3px;margin-top: 6px">
                <label>-</label>
              </div>
              <div style="width:39%;float:right;margin: 3px;margin-right: 4px;margin-top: 7px;font-size: 12px">
                <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahun}}"
                  [(ngModel)]="tanggalAwal" [showIcon]="true" dateFormat="dd M yy"
                  placeholder="{{'frmMonitoringRegistrasiAsuransi_PeriodeAwal'| translate | splitCharT }}" [showTime]="true"
                  (onSelect)="setTglPencarian($event,'awal')"></app-calender>
              </div>
            </div>
            <a class="fa fa-angle-right"
              style="padding:0.2em 0.2em;float:right;margin-top:-7px;display:none;font-size: 2em "
              (click)="periodeClose()" title="{{'frmMonitoringRegistrasiAsuransi_TutupPencarianPeriode' | translate | splitCharT}}"
              id="periodePencarianClose"></a>
            <span
              style="float: left;padding:0.3em;">{{'frmMonitoringRegistrasiAsuransi_DaftarMonitoringRegistrasiAsuransi'| translate | splitCharT }}</span>
          </div>
        </h1>
        <div class="ui-g form-group">
          <div class="ui-g-12 ui-md-12 ui-lg-12 ui-g-nopad">
            <div class="ui-g-12 ui-md-12 ui-lg-12"
              style="border:1px solid #c1c1c1;height:69vh;max-height:69vh;overflow-y: scroll;">
              <p-dataTable #pnl [value]="listMonitoring" scrollable="true" (onSort)="sortingData($event)" [rows]="50"
                [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20,50]" [sortField]="sortF"
                [sortOrder]="sortO" [rowStyleClass]="getSelected" [totalRecords]="totalRecords"
                (onLazyLoad)="loadPage($event)" [lazy]="true" #dt appendTo="body" scrollHeight="48vh"
                selectionMode="single" [(selection)]="selected" (onRowSelect)="onRowSelect($event)" frozenWidth="970px"
                unfrozenWidth="{{widthScreen}}" [expandableRows]="true" [expandedRows]="expandedDetailListAsuransi"
                #dtEn>
                <p-header>
                  <div class="ui-helper-clearfix" style="background: gray;text-align: left">
                    <h4 style="color: white;margin: 3px;font-size: 1vw;">
                      {{'frmMonitoringRegistrasiAsuransi_Data'| translate | splitCharT}} {{totalRow}}/{{totalRecords}}</h4>
                  </div>
                </p-header>

                <p-headerColumnGroup frozen="true">
                  <p-row>
                    <p-column field="number" header="{{'frmMonitoringRegistrasiAsuransi_No' | translate | splitCharT }}"
                      [style]="{'width':'50px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}">
                    </p-column>
                    <!-- <p-column [style]="{'width':'30px'}"></p-column> -->
                    <p-column field="kontakRekananPenjamin"
                      header="{{'frmMonitoringRegistrasiAsuransi_PerusahaanAsuransi' | translate | splitCharT }}"
                      [style]="{'width':'150px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [filter]="true" [sortable]="true">
                      <ng-template pTemplate="filter" let-col>
                        <p-multiSelect [options]="listRekanan" [style]="{'width':'100%', 'text-align':'left'}"
                          [(ngModel)]="kontakRekananPenjaminFilter" multiple="multiple" checkbox="checkbox"
                          filter="filter" optionLabel="label"
                          (onChange)="filterData(kdRekananFilter,'kontakRekananPenjamin')" appendTo="body">
                        </p-multiSelect>
                      </ng-template>
                    </p-column>
                    <p-column field="noAsuransi" header="{{'frmMonitoringRegistrasiAsuransi_NoPeserta' | translate | splitCharT }}"
                      [style]="{'width':'100px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [filter]="true" [sortable]="true">
                      <ng-template pTemplate="filter" let-col>
                        <input id="input" type="text" [style]="{'width':'100%'}" [(ngModel)]="noAsuransiFilter"
                          (ngModelChange)="filterData($event,'noAsuransi')"
                          placeholder="{{'frmMonitoringRegistrasiAsuransi_Cari'| translate | splitCharT }}" pInputText />
                      </ng-template>
                    </p-column>
                    <p-column field="namaHubungan" header="{{'frmMonitoringRegistrasiAsuransi_Hubungan' | translate | splitCharT }}"
                      [style]="{'width':'90px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [filter]="true" [sortable]="true">
                      <ng-template pTemplate="filter" let-col>
                        <p-multiSelect [options]="listHubunganPeserta" [style]="{'width':'100%', 'text-align':'left'}"
                          [(ngModel)]="namaHubunganFilter" multiple="multiple" checkbox="checkbox" filter="filter"
                          optionLabel="label" (onChange)="filterData(namaHubunganFilter,'namaHubungan')"
                          appendTo="body">
                        </p-multiSelect>
                      </ng-template>
                    </p-column>
                    <p-column field="noCM" header="{{'frmMonitoringRegistrasiAsuransi_NoRM' | translate | splitCharT }}"
                      [style]="{'width':'90px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [filter]="true" [sortable]="true">
                      <ng-template pTemplate="filter" let-col>
                        <input id="input" type="text" [style]="{'width':'100%'}" [(ngModel)]="noCMFilter"
                          (ngModelChange)="filterData($event,'noCm')"
                          placeholder="{{'frmMonitoringRegistrasiAsuransi_Cari'| translate | splitCharT }}" pInputText />
                      </ng-template>
                    </p-column>
                    <p-column field="namaPeserta" header="{{'frmMonitoringRegistrasiAsuransi_NamaPeserta' | translate | splitCharT }}"
                      [style]="{'width':'150px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [sortable]="true" [filter]="true">
                      <ng-template pTemplate="filter" let-col>
                        <input id="input" type="text" [style]="{'width':'100%'}" [(ngModel)]="namaPesertaFilter"
                          (ngModelChange)="filterData($event,'namaPeserta')"
                          placeholder="{{'frmMonitoringRegistrasiAsuransi_Cari'| translate | splitCharT }}" pInputText />
                      </ng-template>
                    </p-column>
                    <p-column field="tglLahir" header="{{'frmMonitoringRegistrasiAsuransi_TanggalLahir' | translate | splitCharT }}"
                      [style]="{'width':'80px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [sortable]="true" [filter]="true">
                      <ng-template pTemplate="filter" let-col>
                        <app-calender [monthNavigator]="true" [yearNavigator]="true" yearRange="{{rangeTahunTglLahir}}"
                          [showIcon]="false" dateFormat="dd/mm/yy" [(ngModel)]="tglLahirFilter"
                          (ngModelChange)="filterData($event,'tglLahir')"
                          placeholder="{{'frmMonitoringRegistrasiAsuransi_Cari'| translate | splitCharT }}" title="{{tglLahirTitle}}"
                          appendTo="body"></app-calender>
                      </ng-template>
                    </p-column>
                    <p-column field="kodeExternalJenisKelamin"
                      header="{{'frmMonitoringRegistrasiAsuransi_JK' | translate | splitCharT }}"
                      [style]="{'width':'50px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [sortable]="true" [filter]="true">
                      <ng-template pTemplate="filter" let-col>
                        <p-multiSelect [options]="listJenisKelamin" [style]="{'width':'100%', 'text-align':'left'}"
                          [(ngModel)]="jenisKelaminFilter" multiple="multiple" checkbox="checkbox" filter="filter"
                          optionLabel="label" (onChange)="filterData(jenisKelaminFilter,'jk')" appendTo="body">
                        </p-multiSelect>
                      </ng-template>
                    </p-column>
                    <p-column field="namaGolonganAsuransi"
                      header="{{'frmMonitoringRegistrasiAsuransi_GolonganAsuransi' | translate | splitCharT }}"
                      [style]="{'width':'100px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [filter]="true" [sortable]="true">
                      <ng-template pTemplate="filter" let-col>
                        <p-multiSelect [options]="listGolonganAsuransi" [style]="{'width':'100%', 'text-align':'left'}"
                          [(ngModel)]="namaGolonganAsuransiFilter" multiple="multiple" checkbox="checkbox"
                          filter="filter" optionLabel="label"
                          (onChange)="filterData(namaGolonganAsuransiFilter,'namaGolonganAsuransi')" appendTo="body">
                        </p-multiSelect>
                      </ng-template>
                    </p-column>
                    <p-column field="namaKelas" header="{{'frmMonitoringRegistrasiAsuransi_KelasDijamin' | translate | splitCharT }}"
                      [style]="{'width':'80px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [filter]="true" [sortable]="true">
                      <ng-template pTemplate="filter" let-col>
                        <p-multiSelect [options]="listKelas" [style]="{'width':'100%', 'text-align':'left'}"
                          [(ngModel)]="namaKelasFilter" multiple="multiple" checkbox="checkbox" filter="filter"
                          optionLabel="label" (onChange)="filterData(namaKelasFilter,'namaKelas')" appendTo="body">
                        </p-multiSelect>
                      </ng-template>
                    </p-column>
                  </p-row>
                </p-headerColumnGroup>

                <p-headerColumnGroup>
                  <p-row>

                    <p-column field="kontakRekananAsal"
                      header="{{'frmMonitoringRegistrasiAsuransi_PerusahaanAsalPeserta' | translate | splitCharT }}"
                      [style]="{'width':'130px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [filter]="true" [sortable]="true">
                      <ng-template pTemplate="filter" let-col>
                        <p-multiSelect [options]="listPerusahaanAsal" [style]="{'width':'100%', 'text-align':'left'}"
                          [(ngModel)]="kontakRekananAsalFilter" multiple="multiple" checkbox="checkbox" filter="filter"
                          optionLabel="label" (onChange)="filterData(kontakRekananAsalFilter,'kontakRekananAsal')"
                          appendTo="body">
                        </p-multiSelect>
                      </ng-template>
                    </p-column>
                    <p-column header="{{'frmMonitoringRegistrasiAsuransi_tableDetail' | translate | splitCharT }}"
                      [style]="{'width':'80px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}">
                    </p-column>
                    <p-column field="alamatLengkap" header="{{'frmMonitoringRegistrasiAsuransi_Alamat' | translate | splitCharT }}"
                      [style]="{'width':'300px', 'height':'50px', 'max-height':'50px', 'text-align':'center'}"
                      [sortable]="true" [filter]="true">
                      <ng-template pTemplate="filter" let-col>
                        <input id="input" type="text" [style]="{'width':'100%'}" [(ngModel)]="alamatLengkapFilter"
                          (ngModelChange)="filterData($event,'alamatLengkap')" pInputText
                          placeholder="{{'frmMonitoringRegistrasiAsuransi_Cari'| translate | splitCharT }}" />
                      </ng-template>
                    </p-column>
                  </p-row>
                </p-headerColumnGroup>
                <p-column field="number"
                  [style]="{'width':'50px' , 'height':'35px','text-align':'center', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData" let-i="rowIndex">
                    <span>{{i+1}}</span>
                  </ng-template>
                </p-column>
                <!-- <p-column styleClass="col-icon" [style]="{'width':'30px'}" frozen="true">
                  <ng-template let-col="rowData" let-ri="rowIndex" pTemplate="body" let-i="rowIndex">
                    <button type="button" (click)="expandDetail(col, ri)"
                      style="margin-left: 0px;border: none;background: no-repeat;"><i
                        class="fa fa-chevron-circle-right"></i></button>
                  </ng-template>
                </p-column> -->
                <p-column field="kontakRekananPenjamin"
                  [style]="{'width':'150px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.kontakRekananPenjamin}}">{{monitoring.kontakRekananPenjamin}}</span>
                  </ng-template>
                </p-column>
                <p-column field="noAsuransi"
                  [style]="{'width':'100px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.noAsuransi}}">{{monitoring.noAsuransi}}</span>
                  </ng-template>
                </p-column>
                <p-column field="namaHubungan"
                  [style]="{'width':'90px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.namaHubungan}}">{{monitoring.namaHubungan}}</span>
                  </ng-template>
                </p-column>
                <p-column field="noCM"
                  [style]="{'width':'90px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.noCM}}">{{monitoring.noCM}}</span>
                  </ng-template>
                </p-column>
                <p-column field="namaPeserta"
                  [style]="{'width':'150px','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.namaPeserta}}">{{monitoring.namaPeserta}}</span>
                  </ng-template>
                </p-column>
                <p-column field="tglLahir"
                  [style]="{'width':'80px', 'text-align':'center','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span
                      title="{{monitoring.tglLahir  * 1000 | date:'dd/MM/yyyy'}}">{{monitoring.tglLahir  * 1000 | date:'dd/MM/yyyy'}}</span>
                  </ng-template>
                </p-column>
                <p-column field="kodeExternalJenisKelamin" [style]="{'width':'50px', 'text-align':'center'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.kodeExternalJenisKelamin}}">{{monitoring.kodeExternalJenisKelamin}}</span>
                  </ng-template>
                </p-column>

                <p-column field="namaGolonganAsuransi"
                  [style]="{'text-align':'center','width':'100px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.namaGolonganAsuransi}}">{{monitoring.namaGolonganAsuransi}}</span>
                  </ng-template>
                </p-column>
                <p-column field="namaKelas"
                  [style]="{'width':'80px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true" frozen="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.namaKelas}}">{{monitoring.namaKelas}}</span>
                  </ng-template>
                </p-column>
                <p-column field="kontakRekananAsal"
                  [style]="{'width':'130px' , 'height':'35px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.kontakRekananAsal}}">{{monitoring.kontakRekananAsal}}</span>
                  </ng-template>
                </p-column>

                <p-column
                  [style]="{'width':'80px', 'height':'35px', 'text-align':'center','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true">
                  <ng-template pTemplate="body" let-ri="rowIndex">
                    <button pButton type="button" label="{{'frmMonitoringRegistrasiAsuransi_tableDetail'| translate | splitCharT}}"
                      (click)="detailAsuransi(ri)"></button>
                  </ng-template>
                </p-column>
                <p-column field="alamatLengkap"
                  [style]="{'width':'300px', 'max-height':'35px', 'overflow-y':'-webkit-paged-x','white-space':'nowrap','overflow':'hidden','text-overflow': 'ellipsis'}"
                  [sortable]="true">
                  <ng-template pTemplate="body" let-monitoring="rowData">
                    <span title="{{monitoring.alamatLengkap}}">{{monitoring.alamatLengkap}}</span>
                  </ng-template>
                </p-column>
                <ng-template let-anggaran pTemplate="rowexpansion" expanded="true" let-ri="rowIndex">
                  <p-dataTable [value]="listMonitoring[ri].asuransiBerlaku" [editable]="true" scrollable="true">
                    <p-column field="tglBerlakuAkhir"
                      header="{{'frmMonitoringRegistrasiAsuransi_TanggalBerlaku' | translate | splitCharT }}">
                      <ng-template pTemplate="body" let-monitoring="rowData">
                        <span>
                          {{monitoring.id.tglBerlakuAwal  * 1000 | date:'dd MMM yyyy'}} - </span>
                        <span *ngIf="monitoring.tglBerlakuAkhir != null && monitoring.tglBerlakuAkhir != ''">
                          {{monitoring.tglBerlakuAkhir  * 1000 | date:'dd MMM yyyy'}}</span>
                      </ng-template>
                    </p-column>
                    <p-column field="totalCurrentTerpakai"
                      header="{{'frmMonitoringRegistrasiAsuransi_TotalPlafon' | translate | splitCharT }}">
                      <ng-template pTemplate="body" let-monitoring="rowData">
                        <span>
                          {{setHarga(monitoring.totalCurrentTerpakai)}}</span>
                      </ng-template>
                    </p-column>
                    <p-column field="totalPlafonTanggungan"
                      header="{{'frmMonitoringRegistrasiAsuransi_TotalTerpakai' | translate | splitCharT }}">
                      <ng-template pTemplate="body" let-monitoring="rowData">
                        <span>
                          {{setHarga(monitoring.totalPlafonTanggungan)}}</span>
                      </ng-template>
                    </p-column>
                    <p-column field="totalSaldoTanggungan"
                      header="{{'frmMonitoringRegistrasiAsuransi_TotalSisaSaldo' | translate | splitCharT }}">
                      <ng-template pTemplate="body" let-monitoring="rowData">
                        <span>
                          {{setHarga(monitoring.totalSaldoTanggungan)}}</span>
                      </ng-template>
                    </p-column>
                  </p-dataTable>
                </ng-template>
              </p-dataTable>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>